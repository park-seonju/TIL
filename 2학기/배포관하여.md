# 배포에 관하여

## 알아보기

- 써트 봇 https://certbot.eff.org/ -> https 를 사용하는 방법
- NGINX 사용방법
- 파이프라인 구축을 할때, 빌드는 젠킨스를 통해서 하는 게 좋다.

------

크롬, 파이어 폭스, 삼성 브라우저

nginix

Vue, Spring

nginix 생각보다 엄청 많이 쓴다. 

80번과 443번 포트를 써야한다.

## 분기 처리

front 라우터 요청->/

backend -> /api

주소단위로 분기를 한다.

웹서버와 API 게이트 설정

써트봇 적용을 하면, TLS를 설정을 할 수 있다. 

------

### 볼륨을 만드는 방법은 스크립트를 써 야 한다.

### 이미지를 nginx 와 같이 만든다.

------

## VM 은 그렇게 정답이 아니였다. -> 토커를 왜 쓰는가?

- 빠르게 필요한 서버를 증설할 수 있다.
- 기존에는 VM 을 증설하는 방식 사용
- VM 이 부팅이되는 1분이면 서비스 전체가 중지되기에 충분한 시간
- 운영체제를 부팅해야 하는 기존의 방식보다 빠름
- 이미지를 만들어두면 찍어내기만 하면 되는 배포의 편의성 - 쿠버네티스

------

## 어디까지 도커화 해야 하는가?

- FE/BE 는 해보는 것이 좋다.
- 배포의 효율성/편의성을 생각해보자
- DB/Jenkins/nginx는 선택적
- DB를 이미지화해서 새로 배포할 일이 많이 있을까? 옮긴다면 데이터는?굳이 할 필요가 없다. 보통 데이터 센터나 외부 것을 쓰는 것이 일반적이다.
- 빌드 서버를 병렬적으로 추가 증설하는 경우는?

## 임의의 포트를 쓰면 안 되는 이유?

- ISP (KT, LG, SKT) 에 따라서 닫혀있는 포트가 있다/
- 고객은 포트가 막혔을 거라는 생각을 하지 못하고 그냥 이탈한다.

## 배포구조

- Jenkins 를 활용을 해보는 것은 너무 좋다.
- 시간을 상당히 줄여준다.
- 동일한 도커 이미지로 저장되기 때문에

## SSL -> TLS

- 회원 가입 시에 비밀 번호 등의 개인 정보가 전송되고, 수시로 유출되어서는 안되는 정보들이 오가기 때문에 암호화가 필요하다.
- 매번 데이터를 암호화해서 전송하기 어렵기 때문에 TLS 를 사용하여
- 이론적으로 Application Layer 이기 때문에 안전하다
- Https 확산을 위해서 시작된 비영리 프로젝트  (Let`s encrypt) -> 써트 봇 
- 상용 프로그램을 제작할 떄는 보통 신뢰할 수 Root 인증서 발급자로부터 SSL 인증서를 구매
- Cert Bot을 이용해서 무료 인증서를 발급 받아서 사용하면 좋다.
- nginx나 백엔드 서버 모두에 설정이 필요하다.

## 사용자 계정 만들기

ubuntu 계정이나 심지어 root 계정으로 실행하는 경우에는  해커의 공격 명령이 그 계정의 권한으로 실행되기 때문에, 

계정을 만든 경우 피해를 최소화할 수 있다. 